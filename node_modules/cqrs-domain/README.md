# Introduction

This is adrai's cqrs-domain module (https://github.com/adrai/node-cqrs-domain) extension with Unit Of Work implementation.

# Work Flow

    Unit Of Work is implemented in between domain and commandDispatcher class.
	When the command is issued from the client (external command) it is sent to domain 
	and domain creates UOW instance for that command.
	This UOW then dispatches the command to CommandDispatcher. CommandDispatcher raises 
	corresponding handle event.
	
	Handle event is subscribed by CommandHandlerLoader, which in turn invokes CommandHandlerBase.
	Each commandHandlerbase has AR instance and AR has its uncommittted events. 
	AR is registered dirty in UnitOfWork.
	Once AR is done with applying the events internally they are published internally for SagaHandlers.
	
	If any SagaHandler is listening to these events, that Saga is invoked and it sends the 
	command to another AR following the same route.
	This second AR is also a part of the current UOW. 
	
	Once all the saga's are invoked, UOW is committed. In commit all the dirty AR's are 
	committed, they in turn save their uncommitted events to 
	the event store and then these events are published for denormalization.
	If Domain raises any DomainException UOW issues Rollback. In rollback it discards all 
	the inmemory AR's of that UOW and emits the Exception.	

# Tests

	Tests are not written for this change. They may break.